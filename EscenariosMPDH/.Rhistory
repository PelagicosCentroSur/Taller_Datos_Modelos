knitr::opts_chunk$set(echo=F, warning=FALSE, message=FALSE,collapse=TRUE,fig.align="center",fig.pos="h!")
## Librerías requeridas
paquetes <- c("stringr", "tidyverse", "kableExtra","ggplot2","ggthemes",
"patchwork","dplyr","reshape","here","pdftools","ggpubr","tidyr")
lapply(paquetes, require, character.only = TRUE)
## Directorios de trabajo
dir.0   <- here()
dir.s0   <- here("codigos_admb_modificado")
dir.fun <- here("funciones")
dir.Rdata<-here("Rdata","Esc_CVcru")
## Compilar y ejecutar modelo ADMB
setwd(dir.esc)
## Compilar y ejecutar modelo ADMB
setwd(dir.s0)
here()
dir()
## Directorios de trabajo
dir.0   <- here()
dir.s0   <- here("codigo_admb_modificado")
dir.fun <- here("funciones")
dir.Rdata<-here("Rdata","Esc_CVcru")
## Cargar funciones
source(here(dir.fun,"functions.R"))
source(here(dir.fun,"Fn_CrearRdata.R"))
source(here(dir.fun,"Fn_Data.frame.R"))
source(here(dir.fun,"Fn_Figuras.R"))
source(here(dir.fun,"Fn_Tablas.R"))
source(here(dir.fun,"Fn_PBRs.R"))
source(here(dir.fun,"removefile.R"))
## Compilar y ejecutar modelo ADMB
setwd(dir.s0)
#para mac
system("~/admb-12.2/admb MAE323")
system("./MAE323")
source(here("funciones","removefile.R"))
removefileadmb(dir.esc,"MAE323")
## Compilar y ejecutar modelo ADMB
setwd(dir.s0)
#para mac
system("~/admb-12.2/admb MAE323")
system("./MAE323")
source(here("funciones","removefile.R"))
removefileadmb(dir.s0,"MAE323")
data1        <- lisread("MAE323.dat")
data1        <- lisread("MAE323.dat")
here()
dir()
data1        <- lisread(here("codigo_admb_modificado","MAE323.dat"))
names(data1) <- str_trim(names(data1), side="right")
dat1         <- data1
dat1$Ind
Datos<-dat1$Ind
names(Datos)<-c("year","reclas","cv_reclas","pelaces","cv_pelaces","mpdh","cv_mpdh","desembarque","cv_desembarque")
Datos<-dat1$Ind
names(Datos)<-c("year","reclas","cv_reclas","pelaces","cv_pelaces","mpdh","cv_mpdh","desembarque","cv_desembarque")
Datos
Datos<-dat1$Ind %>% data.frame()
names(Datos)<-c("year","reclas","cv_reclas","pelaces","cv_pelaces","mpdh","cv_mpdh","desembarque","cv_desembarque")
Datos
Datos<-dat1$Ind %>% data.frame()
names(Datos)<-c("year","reclas","cv_reclas","pelaces","cv_pelaces","mpdh","cv_mpdh","desembarque","cv_desembarque")
kbl(Datos)
Datos<-dat1$Ind %>% data.frame()
names(Datos)<-c("year","reclas","cv_R","pelaces","cv_P","mpdh","cv_M","desembarque","cv_D")
kbl(Datos)
Datos1<-Datos[1,2,4,6,8]
Datos<-dat1$Ind %>% data.frame()
names(Datos)<-c("year","reclas","cv_R","pelaces","cv_P","mpdh","cv_M","desembarque","cv_D")
kbl(Datos)
Datos1<-Datos[,c(1,2,4,6,8)]
Datos1<-Datos[,c(1,2,4,6,8)]
dat1$Ind
Datos1
Datos1<-Datos[,c(1,2,4,6,8)] %>% melt(id(year))
Datos1<-Datos[,c(1,2,4,6,8)] %>% melt(id=year)
Datos1<-Datos[,c(1,2,4,6,8)]
Datos1<-Datos1%>% melt(id=year)
Datos1<-Datos[,c(1,2,4,6,8)] %>% melt(id="year")
View(Datos1)
ggplot(Datos1,aes(x=year,y=value,color=variable))+geom_line()
ggplot(Datos,aes(x=reclas,y=mpdh)) %>% geom_point()
Datos<-dat1$Ind %>% data.frame()
names(Datos)<-c("year","reclas","cv_R","pelaces","cv_P","mpdh","cv_M","desembarque","cv_D")
kbl(Datos)
ggplot(Datos,aes(x=mpdh,y=reclas)) %>% geom_point()
ggplot(Datos,aes(x=mpdh,y=reclas)) + geom_point()
ggplot(Datos,aes(x=mpdh,y=reclas)) + geom_point(size=.6)+
ggplot(Datos,aes(x=mpdh,y=reclas)) + geom_point()+geom_smooth()
ggplot(Datos,aes(x=mpdh,y=reclas)) + geom_point()+geom_smooth(method=lm,formula=1~splines::bs(x,2))
ggplot(Datos,aes(x=mpdh,y=reclas)) + geom_point()+geom_smooth(method=lm,formula=y~splines::bs(x,2))
ggplot(Datos,aes(x=mpdh,y=reclas)) + geom_point()+geom_smooth(method=lm,formula=y~splines::bs(x,3))
ggplot(Datos,aes(x=mpdh,y=reclas)) + geom_point()+geom_smooth(method=lm,formula=y~splines::bs(x,2))
ggplot(Datos,aes(x=mpdh,y=reclas)) + geom_point()+geom_smooth(method="glm")
ggplot(Datos,aes(x=mpdh,y=reclas)) + geom_point()+geom_smooth(method="glm",method.args=list(family="poisson"))
ggplot(Datos,aes(x=mpdh,y=reclas)) + geom_point()+geom_smooth(method="glm",method.args=list(family="poisson"))
ggplot(Datos,aes(x=mpdh,y=reclas)) + geom_point()+geom_smooth(method="glm",method.args=list(family="identity"))
ggplot(Datos,aes(x=mpdh,y=reclas)) + geom_point()+geom_smooth(method="glm",method.args=list(family="identity"))
Datos1<-Datos[,c(1,2,4,6,8)] %>% melt(id="year")
ggplot(Datos1,aes(x=year,y=value,color=variable))+geom_line()
Datos1<-Datos[,c(1,2,4,6,8)] %>% melt(id="year")
ggplot(Datos1,aes(x=year,y=value,color=variable))+geom_area()
Datos1<-Datos[,c(1,2,4,6,8)] %>% melt(id="year")
ggplot(Datos1,aes(x=year,y=value,fill=variable))+geom_area()
ggplot(Datos1,aes(x=year,y=value,fill=variable))+geom_area(alpha=.5)
ggplot(Datos1,aes(x=year,y=value,fill=variable))+geom_area(alpha=.5)+theme_bw()
ggplot(Datos1,aes(x=year,y=value,fill=variable))+geom_area(alpha=.5)+theme_bw()+
scale_fill_gradient(low="red",high="yellow")
ggplot(Datos1,aes(x=year,y=value))+geom_area(alpha=.5)+theme_bw()+
scale_fill_gradient(low="red",high="yellow")
ggplot(Datos1,aes(x=year,y=value,fill=variable))+geom_area(alpha=.5)+theme_bw()
ggplot(Datos1,aes(x=year,y=value,color=variable,fill=variable))+geom_area(alpha=.5)+theme_bw()
ggplot(Datos1,aes(x=year,y=value,color=variable,fill=variable))+
geom_area(alpha=.8)+
theme_bw()
ggplot(Datos1,aes(x=year,y=value,color=variable,fill=variable))+
geom_area(alpha=.3)+
theme_bw()
ggplot(Datos1,aes(x=year,y=value,color=variable,fill=variable,alpha=.3))+
geom_area()+
theme_bw()
ggplot(Datos1,aes(x=year,y=value,color=variable,fill=variable))+
geom_area(alpha=.3)+
theme_bw()
ggplot(Datos1,aes(x=year,y=value))+
geom_area(aes(color=variable,fill=variable),alpha=.3)+
theme_bw()
ggplot(Datos1,aes(x=year,y=value))+
geom_area(aes(color=variable,fill=variable),alpha=.3)+
ylab("Biomasas (t)")+xlab("Años")+
theme_bw()
ggplot(Datos1,aes(x=year,y=value/1000))+
geom_area(aes(color=variable,fill=variable),alpha=.3)+
ylab("Biomasas (mil t)")+xlab("Años")+
theme_bw()
ggplot(Datos1,aes(x=year,y=value/1000000))+
geom_area(aes(color=variable,fill=variable),alpha=.3)+
ylab("Biomasas (millones de t)")+xlab("Años")+
theme_bw()
ggplot(Datos1,aes(x=year,y=value/1000000))+
geom_area(aes(color=variable,fill=variable),alpha=.3)+
ylab("Biomasas (millones de t)")+xlab("Años")+ggtitle("Sardina común")
ggplot(Datos1,aes(x=year,y=value/1000000))+
geom_area(aes(color=variable,fill=variable),alpha=.3)+
ylab("Biomasas (millones de t)")+xlab("Años")+ggtitle("Sardina común")+
theme_bw()
